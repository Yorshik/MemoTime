{% extends "base.html" %}
{% load static %}
{% load i18n %}
{% block body %}
  <div class="container">
    <h2>{% trans "Feedback form" %}</h2>
    {% if messages %}
      {% for message in messages %}
        <div class="alert {% if message.tags == 'success' %}alert-success{% else %}alert-danger{% endif %}"
             role="alert">
          {{ message }}
          <button type="button"
                  class="btn-close"
                  data-bs-dismiss="alert"
                  aria-label="{% trans 'Close' %}"></button>
        </div>
      {% endfor %}
    {% endif %}
    <form method="post"
          enctype="multipart/form-data"
          class="main-form">
      {% csrf_token %}
      <p><span class="red">*</span> - {% translate 'required field' %}</p>
      <div class="form-group animate-placeholder">
          {% with form=form.author %}
            {% include 'includes/form.html' %}
          {% endwith %}
      </div>
      <div class="form-group">
        {% with form=form.feedback %}
          {% include 'includes/form.html' %}
        {% endwith %}
      </div>
      <div class="form-group">
        {% for field in form.files_form %}
          <div>
            <label for="{{ field.id_for_label }}" class="">{{ field.label }}</label>
            {% if field.help_text %}<small class="form-text text-muted">{{ field.help_text }}</small>{% endif %}
          </div>
          {{ field }}
          {% for error in field.errors %}<div class="alert alert-danger">{{ error }}</div>{% endfor %}
        {% endfor %}
      </div>
      <button type="submit" class="btn btn_submit">{% trans "Send" %}</button>
    </form>
  </div>
{% endblock body %}
{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/custom_file_input.css' %}">
  <link rel="stylesheet" href="{% static 'css/feedback.css' %}">
{% endblock extra_css %}
{% block extra_js %}
  <script src="{% static 'js/custom_file_input.js' %}"></script>
  <script src="{% static 'js/forms.js' %}"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      new FormAnimator('animate');
  });
  </script>
{% endblock extra_js %}
